<template>
    <article id="login">
        <section class="card">
            <div class="login transitionTime" :class="{totop: !loginBool}">
                <h3 class="title">登录</h3>
                <div class="iconList">
                    <svg t="1594185297377" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="737" width="128" height="128"><path d="M928.802712 740.004881c-6.196068-75.86278-45.941153-160.490305-62.533424-202.821423l-42.435254-109.290305c-1.353763-45.541966 12.114441-149.989966-58.489492-280.992543C694.584407 15.932746 552.821153 4.078644 526.526915 2.742237 500.406237 1.631458 336.410034 0.295051 255.809085 142.735186 175.346983 285.331525 196.903051 428.032 196.903051 428.032L152.037966 538.276881s-21.000678 50.26278-39.068203 111.303594C94.624542 710.760136 76.834712 806.99878 94.624542 826.402712c18.327864 19.664271 83.829153-89.487186 89.886373-99.328 0 0 4.703458 52.015729 16.974102 79.247186 10.101153 21.694915 33.965559 76.140475 82.215051 118.714577-23.187525 7.549831-78.969492 27.769492-87.057356 48.388339-10.24 26.554576 7.949017 29.505085 39.484746 31.258033 31.258034 1.752949 181.924881 5.796881 254.021423-4.165423 0.676881-0.277695 1.614102-0.277695 2.290983-0.416543 7.150644 0.277695 13.884746 0.416542 19.820475 0.416543 4.026576 0 8.608542 0 13.884746-0.277695 0.659525 0 0.93722 0.277695 1.596746 0.277695 72.113898 10.24 222.780746 6.196068 254.038779 4.165423 31.258034-1.735593 49.724746-4.859661 39.484746-31.258033-8.226712-21.174237-65.62278-41.51539-88.133424-48.648678 7.289492-6.334915 14.145085-13.069017 20.48-20.358509 81.260475-89.469831 74.526373-145.668339 77.893424-178.158644 0 0 68.469153 98.789966 83.134915 102.01817 15.516203 3.245559 20.098169-12.392136 14.162441-88.272272z" fill="#FFFFFF" p-id="738"></path><path d="M325.336949 953.604339a225.36678 225.36678 0 0 1-41.098847-29.244746c-23.187525 7.688678-78.969492 27.769492-87.057356 48.388339-10.24 26.554576 7.949017 29.505085 39.484746 31.258034 31.258034 1.752949 181.924881 5.796881 254.021423-4.165424 0.676881-0.277695 1.614102-0.277695 2.290983-0.416542a353.818034 353.818034 0 0 1-167.658305-45.819661z m408.055322-29.244746c-71.419661 63.488-159.414237 74.127186-206.848 75.602441 0.659525 0 0.93722 0.277695 1.614102 0.277695 72.096542 10.24 222.76339 6.196068 254.021424 4.165424 31.27539-1.735593 49.724746-4.842305 39.484745-31.240678-8.348203-21.434576-65.761627-41.654237-88.272271-48.804882z" fill="#E5A627" p-id="739"></path><path d="M866.147797 536.923119l-42.452611-109.429153s-291.232542 92.177356-626.653288 0l-44.88244 110.227526s61.596203 21.833763 160.507661 37.488813v148.219661s78.570305 10.778034 137.736678 3.367051v-137.181288c120.068339 6.595254 265.754034-2.950508 415.744-52.69261z" fill="#CE2D22" p-id="740"></path><path d="M765.344542 146.779119C694.862102 16.054237 553.081492 4.200136 526.80461 2.846373c-26.138034-1.336407-190.151593-2.690169-270.752542 139.888813-80.566237 142.717831-58.871322 285.296814-58.871322 285.296814 336.774508 93.930305 626.653288 0 626.653288 0-1.49261-45.819661 12.253288-150.528-58.489492-281.252881z m-337.989423 141.624406c-30.598508 0-55.122441-35.423458-55.122441-79.22983 0-43.667525 24.801627-79.247186 55.122441-79.247187 30.581153 0 55.122441 35.458169 55.12244 79.247187 0 43.806373-24.541288 79.247186-55.12244 79.247186z m164.534237 0c-30.581153 0-55.105085-35.423458-55.105085-79.22983 0-43.667525 24.784271-79.247186 55.105085-79.247187 30.598508 0 55.122441 35.458169 55.122441 79.247187 0 43.806373-24.784271 79.247186-55.122441 79.247186z" fill="#070001" p-id="741"></path><path d="M419.805288 215.647458c0 17.373288 10.778034 31.674576 23.847051 31.674576 13.207864 0 23.864407-14.023593 23.864407-31.674576s-10.79539-31.674576-23.864407-31.674577c-13.069017 0.138847-23.847051 14.283932-23.847051 31.674577z m172.084068-19.820475c15.91539 0 37.749153 8.226712 33.028339 21.174237-3.783593 10.24-22.510644-3.384407-29.244746-4.460474-8.504407-1.076068-21.018034-2.013288-31.27539 10.517695-6.872949 8.226712-17.650983 7.289492-13.884745-4.043933 4.338983-12.669831 20.358508-23.187525 41.376542-23.187525z" fill="#070001" p-id="742"></path><path d="M318.724339 354.998237c0 13.329356 99.449492 63.192949 190.568136 62.516068 91.101288-0.659525 192.581424-49.985085 192.581423-64.407864 0-14.283932-73.051119-39.745085-194.47322-39.745085-121.283254-0.156203-188.658983 21.955254-188.658983 41.636881z" fill="#E5A627" p-id="743"></path><path d="M928.802712 740.004881c-6.196068-75.86278-45.941153-160.490305-62.533424-202.821423a1104.670373 1104.670373 0 0 1-116.701288 31.275389c3.367051 16.974102 7.688678 54.029017 6.074576 124.789153-2.707525 105.524068-37.072271 191.505356-121.699796 241.230102-84.627525 49.724746-233.263729 38.807864-298.088136-42.45261-61.197017-76.279322-81.000136-133.293559-66.299661-324.104678-73.589153-14.561627-117.395525-29.921627-117.395525-29.921628s-21.018034 50.26278-39.08556 111.32095C94.76339 710.499797 76.973559 806.703729 94.76339 826.125017c18.327864 19.681627 83.968-89.487186 89.903729-99.328 0 0 4.703458 52.033085 16.974101 79.247186 12.253288 27.231458 46.618034 105.524068 123.43539 147.976678 76.678508 42.313763 141.919458 46.340339 187.600271 46.340339 45.680814 0 160.091119-6.716746 241.230102-96.203932 81.121627-89.487186 74.526373-145.685695 77.893424-178.158644 0 0 68.451797 98.77261 83.134915 102.01817 15.238508 3.505898 19.820475-12.149153 13.884746-87.994577z" fill="#070001" p-id="744"></path></svg>
                    <svg t="1594185470677" class="icon" viewBox="0 0 1255 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2229" width="128" height="128"><path d="M446.827355 3.996903C206.022194 3.996903 8.720516 169.422452 8.720516 379.507613c0 121.228387 65.635097 220.787613 175.269161 297.884903L140.188903 810.28129l153.137549-77.427613c54.833548 10.96671 98.766452 22.197677 153.467871 22.197678 13.741419 0 27.383742-0.660645 40.893935-1.783742a332.040258 332.040258 0 0 1-13.543226-92.490323c0-192.80929 164.401548-349.316129 372.504774-349.316129 14.203871 0 28.242581 1.024 42.215226 2.609549C850.910968 136.158968 662.263742 3.963871 446.827355 3.963871zM304.557419 302.08c-32.834065 0-65.998452-22.131613-65.998451-55.262968 0-33.230452 33.164387-55.097806 65.998451-55.097806 32.801032 0 54.701419 21.900387 54.70142 55.097806 0 33.098323-21.900387 55.262968-54.70142 55.262968z m306.60542 0c-32.834065 0-65.800258-22.131613-65.800258-55.262968 0-33.230452 32.966194-55.097806 65.800258-55.097806 32.999226 0 54.833548 21.900387 54.833548 55.097806 0 33.098323-21.867355 55.262968-54.833548 55.262968z m635.408516 353.379097c0-176.392258-175.269161-320.280774-372.108387-320.280774-208.433548 0-372.636903 143.888516-372.636903 320.280774 0 176.788645 164.170323 320.379871 372.60387 320.379871 43.635613 0 87.634581-11.065806 131.468388-22.131613l120.171354 66.26271-32.933161-110.327742c87.931871-66.460903 153.434839-154.590968 153.434839-254.183226z m-492.940387-55.163871c-21.80129 0-43.833806-21.834323-43.833807-44.131097 0-22.032516 21.999484-44.197161 43.833807-44.197161 33.131355 0 54.833548 22.131613 54.833548 44.197161 0 22.296774-21.702194 44.131097-54.833548 44.131097z m241.003355 0c-21.669161 0-43.536516-21.834323-43.536517-44.131097 0-22.032516 21.867355-44.197161 43.536517-44.197161 32.801032 0 54.833548 22.131613 54.833548 44.197161 0 22.296774-22.032516 44.131097-54.833548 44.131097z" fill="#31B649" p-id="2230"></path></svg>
                </div>
                <input type="email" v-model="email" placeholder="电子邮箱">
                <input type="password" v-model="password" placeholder="密码">
                <button class="ellipse-btn" @click="login">登录</button>
            </div>

            <div class="login register transitionTime" :class="{tobottom: !loginBool}">
                <h3 class="title">注册</h3>
                <div class="iconList">
                    <svg t="1594185297377" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="737" width="128" height="128"><path d="M928.802712 740.004881c-6.196068-75.86278-45.941153-160.490305-62.533424-202.821423l-42.435254-109.290305c-1.353763-45.541966 12.114441-149.989966-58.489492-280.992543C694.584407 15.932746 552.821153 4.078644 526.526915 2.742237 500.406237 1.631458 336.410034 0.295051 255.809085 142.735186 175.346983 285.331525 196.903051 428.032 196.903051 428.032L152.037966 538.276881s-21.000678 50.26278-39.068203 111.303594C94.624542 710.760136 76.834712 806.99878 94.624542 826.402712c18.327864 19.664271 83.829153-89.487186 89.886373-99.328 0 0 4.703458 52.015729 16.974102 79.247186 10.101153 21.694915 33.965559 76.140475 82.215051 118.714577-23.187525 7.549831-78.969492 27.769492-87.057356 48.388339-10.24 26.554576 7.949017 29.505085 39.484746 31.258033 31.258034 1.752949 181.924881 5.796881 254.021423-4.165423 0.676881-0.277695 1.614102-0.277695 2.290983-0.416543 7.150644 0.277695 13.884746 0.416542 19.820475 0.416543 4.026576 0 8.608542 0 13.884746-0.277695 0.659525 0 0.93722 0.277695 1.596746 0.277695 72.113898 10.24 222.780746 6.196068 254.038779 4.165423 31.258034-1.735593 49.724746-4.859661 39.484746-31.258033-8.226712-21.174237-65.62278-41.51539-88.133424-48.648678 7.289492-6.334915 14.145085-13.069017 20.48-20.358509 81.260475-89.469831 74.526373-145.668339 77.893424-178.158644 0 0 68.469153 98.789966 83.134915 102.01817 15.516203 3.245559 20.098169-12.392136 14.162441-88.272272z" fill="#FFFFFF" p-id="738"></path><path d="M325.336949 953.604339a225.36678 225.36678 0 0 1-41.098847-29.244746c-23.187525 7.688678-78.969492 27.769492-87.057356 48.388339-10.24 26.554576 7.949017 29.505085 39.484746 31.258034 31.258034 1.752949 181.924881 5.796881 254.021423-4.165424 0.676881-0.277695 1.614102-0.277695 2.290983-0.416542a353.818034 353.818034 0 0 1-167.658305-45.819661z m408.055322-29.244746c-71.419661 63.488-159.414237 74.127186-206.848 75.602441 0.659525 0 0.93722 0.277695 1.614102 0.277695 72.096542 10.24 222.76339 6.196068 254.021424 4.165424 31.27539-1.735593 49.724746-4.842305 39.484745-31.240678-8.348203-21.434576-65.761627-41.654237-88.272271-48.804882z" fill="#E5A627" p-id="739"></path><path d="M866.147797 536.923119l-42.452611-109.429153s-291.232542 92.177356-626.653288 0l-44.88244 110.227526s61.596203 21.833763 160.507661 37.488813v148.219661s78.570305 10.778034 137.736678 3.367051v-137.181288c120.068339 6.595254 265.754034-2.950508 415.744-52.69261z" fill="#CE2D22" p-id="740"></path><path d="M765.344542 146.779119C694.862102 16.054237 553.081492 4.200136 526.80461 2.846373c-26.138034-1.336407-190.151593-2.690169-270.752542 139.888813-80.566237 142.717831-58.871322 285.296814-58.871322 285.296814 336.774508 93.930305 626.653288 0 626.653288 0-1.49261-45.819661 12.253288-150.528-58.489492-281.252881z m-337.989423 141.624406c-30.598508 0-55.122441-35.423458-55.122441-79.22983 0-43.667525 24.801627-79.247186 55.122441-79.247187 30.581153 0 55.122441 35.458169 55.12244 79.247187 0 43.806373-24.541288 79.247186-55.12244 79.247186z m164.534237 0c-30.581153 0-55.105085-35.423458-55.105085-79.22983 0-43.667525 24.784271-79.247186 55.105085-79.247187 30.598508 0 55.122441 35.458169 55.122441 79.247187 0 43.806373-24.784271 79.247186-55.122441 79.247186z" fill="#070001" p-id="741"></path><path d="M419.805288 215.647458c0 17.373288 10.778034 31.674576 23.847051 31.674576 13.207864 0 23.864407-14.023593 23.864407-31.674576s-10.79539-31.674576-23.864407-31.674577c-13.069017 0.138847-23.847051 14.283932-23.847051 31.674577z m172.084068-19.820475c15.91539 0 37.749153 8.226712 33.028339 21.174237-3.783593 10.24-22.510644-3.384407-29.244746-4.460474-8.504407-1.076068-21.018034-2.013288-31.27539 10.517695-6.872949 8.226712-17.650983 7.289492-13.884745-4.043933 4.338983-12.669831 20.358508-23.187525 41.376542-23.187525z" fill="#070001" p-id="742"></path><path d="M318.724339 354.998237c0 13.329356 99.449492 63.192949 190.568136 62.516068 91.101288-0.659525 192.581424-49.985085 192.581423-64.407864 0-14.283932-73.051119-39.745085-194.47322-39.745085-121.283254-0.156203-188.658983 21.955254-188.658983 41.636881z" fill="#E5A627" p-id="743"></path><path d="M928.802712 740.004881c-6.196068-75.86278-45.941153-160.490305-62.533424-202.821423a1104.670373 1104.670373 0 0 1-116.701288 31.275389c3.367051 16.974102 7.688678 54.029017 6.074576 124.789153-2.707525 105.524068-37.072271 191.505356-121.699796 241.230102-84.627525 49.724746-233.263729 38.807864-298.088136-42.45261-61.197017-76.279322-81.000136-133.293559-66.299661-324.104678-73.589153-14.561627-117.395525-29.921627-117.395525-29.921628s-21.018034 50.26278-39.08556 111.32095C94.76339 710.499797 76.973559 806.703729 94.76339 826.125017c18.327864 19.681627 83.968-89.487186 89.903729-99.328 0 0 4.703458 52.033085 16.974101 79.247186 12.253288 27.231458 46.618034 105.524068 123.43539 147.976678 76.678508 42.313763 141.919458 46.340339 187.600271 46.340339 45.680814 0 160.091119-6.716746 241.230102-96.203932 81.121627-89.487186 74.526373-145.685695 77.893424-178.158644 0 0 68.451797 98.77261 83.134915 102.01817 15.238508 3.505898 19.820475-12.149153 13.884746-87.994577z" fill="#070001" p-id="744"></path></svg>
                    <svg t="1594185470677" class="icon" viewBox="0 0 1255 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2229" width="128" height="128"><path d="M446.827355 3.996903C206.022194 3.996903 8.720516 169.422452 8.720516 379.507613c0 121.228387 65.635097 220.787613 175.269161 297.884903L140.188903 810.28129l153.137549-77.427613c54.833548 10.96671 98.766452 22.197677 153.467871 22.197678 13.741419 0 27.383742-0.660645 40.893935-1.783742a332.040258 332.040258 0 0 1-13.543226-92.490323c0-192.80929 164.401548-349.316129 372.504774-349.316129 14.203871 0 28.242581 1.024 42.215226 2.609549C850.910968 136.158968 662.263742 3.963871 446.827355 3.963871zM304.557419 302.08c-32.834065 0-65.998452-22.131613-65.998451-55.262968 0-33.230452 33.164387-55.097806 65.998451-55.097806 32.801032 0 54.701419 21.900387 54.70142 55.097806 0 33.098323-21.900387 55.262968-54.70142 55.262968z m306.60542 0c-32.834065 0-65.800258-22.131613-65.800258-55.262968 0-33.230452 32.966194-55.097806 65.800258-55.097806 32.999226 0 54.833548 21.900387 54.833548 55.097806 0 33.098323-21.867355 55.262968-54.833548 55.262968z m635.408516 353.379097c0-176.392258-175.269161-320.280774-372.108387-320.280774-208.433548 0-372.636903 143.888516-372.636903 320.280774 0 176.788645 164.170323 320.379871 372.60387 320.379871 43.635613 0 87.634581-11.065806 131.468388-22.131613l120.171354 66.26271-32.933161-110.327742c87.931871-66.460903 153.434839-154.590968 153.434839-254.183226z m-492.940387-55.163871c-21.80129 0-43.833806-21.834323-43.833807-44.131097 0-22.032516 21.999484-44.197161 43.833807-44.197161 33.131355 0 54.833548 22.131613 54.833548 44.197161 0 22.296774-21.702194 44.131097-54.833548 44.131097z m241.003355 0c-21.669161 0-43.536516-21.834323-43.536517-44.131097 0-22.032516 21.867355-44.197161 43.536517-44.197161 32.801032 0 54.833548 22.131613 54.833548 44.197161 0 22.296774-22.032516 44.131097-54.833548 44.131097z" fill="#31B649" p-id="2230"></path></svg>
                </div>
                <input type="email" v-model="email" placeholder="电子邮箱">
                <input type="email" v-model="emailms" placeholder="邮箱验证码"><button ref="sendEmail" class="sendEmail" @click="send">发送</button>
                <input type="password" v-model="password" placeholder="密码">
                <button class="ellipse-btn" @click="register">注册</button>
            </div>

            <div class="text transitionTime" :class="{tobottom: !loginBool}">
                <h3 class="title">没有账号?</h3>
                <p>立即注册加入我们，和我们一起开始旅程吧</p>
                <button class="ellipse-btn" @click="loginBool = false">注册</button>
            </div>

            <div class="text tologin transitionTime" :class="{totop: !loginBool}">
                <h3 class="title">已有账号?</h3>
                <p>请使用您的帐号进行登录</p>
                <button class="ellipse-btn" @click="loginBool = true">登录</button>
            </div>

            <div class="redbg transitionTime" :class="{toleft: !loginBool}"></div>
        </section>
    </article>
</template>

<script>
import { sendEmail,user_register,user_login } from '@/axios/user'
export default {
    name: 'login',
    data () {
        return {
            email: '',
            password: '',
            emailms: '',
            loginBool: true,
            timer: ''
        }
    },
    methods: {
        async send () {
            let result = await sendEmail( this.email )
            if ( result.data.code == 200 ) {
                let second = 60
                this.timer = setInterval(() => {
                    this.$refs.sendEmail.innerHTML = second + '秒'
                    this.$refs.sendEmail.disabled = 'disabled'
                    second--
                    if ( second == 0 ) {
                        clearInterval(this.timer)
                        this.$refs.sendEmail.disabled = ''
                        this.$refs.sendEmail.innerHTML = '发送'
                    }
                },1000)
                this.$message({
                    type: 'success',
                    message: '验证码已发送'
                })
            }
        },
        async register () {
            if ( !this.email || !this.password || !this.emailms ) { 
                this.$message({
                    type: 'error',
                    message: '请将信息输入完整'
                })
            } else {
                let result = await user_register( this.email,this.emailms,this.password )
                if ( result.data.code == 200 ) {
                    this.$message({
                        type: 'success',
                        message: '注册成功'
                    })
                    this.loginBool = true
                }
            }
        },
        async login () {
            if ( !this.email || !this.password ) {
                this.$message({
                    type: 'error',
                    message: '请将信息输入完整'
                })
            } else {
                let result = await user_login( this.email,this.password )
                if ( result.data.code == 200 ) {
                    this.$message({
                        type: 'success',
                        message: '登录成功'
                    })
                    this.$store.commit('setUserData',result.data.data)
                    this.$router.go(-1)
                }
            }
        }
    }
}
</script>

<style lang="scss" scoped>
@import '@/assets/css/common.scss';
@import '@/assets/css/theme.scss';
#login{
    width: 100%;
    height: 100vh;
    background: #f6f5f7;
    display: flex;
    justify-content: center;
    align-items: center;
    section.card{
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 14px 28px rgba(0, 0, 0, .25), 0 10px 10px rgba(0, 0, 0, .22);
        position: relative;
        overflow: hidden;
        width: 768px;
        max-width: 100%;
        height: 480px;
        > div{ position: absolute; width: 50%; z-index: 2; text-align: center; height: 100%;}
        div.login{
            h3{ margin-top: 84px;}
            div.iconList{
                display: flex;
                justify-content: center;
                width: 100%;
                margin: 30px 0px;
                *{
                    margin: 0 30px;
                    width: 30px;
                    height: 30px;
                    cursor: pointer;
                }
            }
            input{
                width: 60%;
                background: #eee;
                border: none;
                padding: 12px 15px;
                margin: 8px 0;
                outline: none;
            }
            button{ color: white; background: $red; margin: 40px;}
        }

        div.register{
            left: 50%;
            top: 100%;
            button.sendEmail{
                position: absolute;
                width: 30%;
                height: 40px;
                padding: 0;
                margin: 0;
                line-height: 40px;
                left: 206px;
                top: 270px;
            }
        }

        div.text{
            left: 50%;
            color: white;
            h3{
                margin-top: 170px;
            }
            p{ margin: 30px 0px;}
            button{
                color: white;
                border: 1px solid white;
            }
        }

        div.tologin{
            left: 0;
            top: -100%;
        }

        div.redbg{
            background: linear-gradient(to right, #ff4b2b, #ff416c) no-repeat 0 0 / cover;
            width: 50%;
            height: 100%;
            left: 50%;
            color: white;
            z-index: 1;
        }
    }
}
.transitionTime{ transition: transform .6s ease-in-out;}
.totop{ transform: translateY(480px);}
.tobottom{ transform: translateY(-480px);}
.toleft{ transform: translateX(-384px);}
.toright{ transform: translateX(384px);}
.icon {
       width: 1em; height: 1em;
       vertical-align: -0.15em;
       fill: currentColor;
       overflow: hidden;
    }
</style>