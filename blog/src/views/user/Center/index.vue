<template>
  <section id="user_center">
    <!-- 头栏 -->
    <div class="head user-block">
      <img src="@/assets/img/default_head_img.png" alt="" v-if="!userData.head_img">
      <img :src="userData.head_img" alt="" v-if="userData.head_img">
      <div class="user">
        <p class="name">
          <span>{{ userData.name }}</span>
          <span>
            <a target="_blank" :href="linkqq"><svg t="1594894286027" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7367" width="128" height="128"><path d="M928.802712 740.004881c-6.196068-75.86278-45.941153-160.490305-62.533424-202.821423l-42.435254-109.290305c-1.353763-45.541966 12.114441-149.989966-58.489492-280.992543C694.584407 15.932746 552.821153 4.078644 526.526915 2.742237 500.406237 1.631458 336.410034 0.295051 255.809085 142.735186 175.346983 285.331525 196.903051 428.032 196.903051 428.032L152.037966 538.276881s-21.000678 50.26278-39.068203 111.303594C94.624542 710.760136 76.834712 806.99878 94.624542 826.402712c18.327864 19.664271 83.829153-89.487186 89.886373-99.328 0 0 4.703458 52.015729 16.974102 79.247186 10.101153 21.694915 33.965559 76.140475 82.215051 118.714577-23.187525 7.549831-78.969492 27.769492-87.057356 48.388339-10.24 26.554576 7.949017 29.505085 39.484746 31.258033 31.258034 1.752949 181.924881 5.796881 254.021423-4.165423 0.676881-0.277695 1.614102-0.277695 2.290983-0.416543 7.150644 0.277695 13.884746 0.416542 19.820475 0.416543 4.026576 0 8.608542 0 13.884746-0.277695 0.659525 0 0.93722 0.277695 1.596746 0.277695 72.113898 10.24 222.780746 6.196068 254.038779 4.165423 31.258034-1.735593 49.724746-4.859661 39.484746-31.258033-8.226712-21.174237-65.62278-41.51539-88.133424-48.648678 7.289492-6.334915 14.145085-13.069017 20.48-20.358509 81.260475-89.469831 74.526373-145.668339 77.893424-178.158644 0 0 68.469153 98.789966 83.134915 102.01817 15.516203 3.245559 20.098169-12.392136 14.162441-88.272272z" fill="#FFFFFF" p-id="7368"></path><path d="M325.336949 953.604339a225.36678 225.36678 0 0 1-41.098847-29.244746c-23.187525 7.688678-78.969492 27.769492-87.057356 48.388339-10.24 26.554576 7.949017 29.505085 39.484746 31.258034 31.258034 1.752949 181.924881 5.796881 254.021423-4.165424 0.676881-0.277695 1.614102-0.277695 2.290983-0.416542a353.818034 353.818034 0 0 1-167.658305-45.819661z m408.055322-29.244746c-71.419661 63.488-159.414237 74.127186-206.848 75.602441 0.659525 0 0.93722 0.277695 1.614102 0.277695 72.096542 10.24 222.76339 6.196068 254.021424 4.165424 31.27539-1.735593 49.724746-4.842305 39.484745-31.240678-8.348203-21.434576-65.761627-41.654237-88.272271-48.804882z" fill="#E5A627" p-id="7369"></path><path d="M866.147797 536.923119l-42.452611-109.429153s-291.232542 92.177356-626.653288 0l-44.88244 110.227526s61.596203 21.833763 160.507661 37.488813v148.219661s78.570305 10.778034 137.736678 3.367051v-137.181288c120.068339 6.595254 265.754034-2.950508 415.744-52.69261z" fill="#CE2D22" p-id="7370"></path><path d="M765.344542 146.779119C694.862102 16.054237 553.081492 4.200136 526.80461 2.846373c-26.138034-1.336407-190.151593-2.690169-270.752542 139.888813-80.566237 142.717831-58.871322 285.296814-58.871322 285.296814 336.774508 93.930305 626.653288 0 626.653288 0-1.49261-45.819661 12.253288-150.528-58.489492-281.252881z m-337.989423 141.624406c-30.598508 0-55.122441-35.423458-55.122441-79.22983 0-43.667525 24.801627-79.247186 55.122441-79.247187 30.581153 0 55.122441 35.458169 55.12244 79.247187 0 43.806373-24.541288 79.247186-55.12244 79.247186z m164.534237 0c-30.581153 0-55.105085-35.423458-55.105085-79.22983 0-43.667525 24.784271-79.247186 55.105085-79.247187 30.598508 0 55.122441 35.458169 55.122441 79.247187 0 43.806373-24.784271 79.247186-55.122441 79.247186z" fill="#070001" p-id="7371"></path><path d="M419.805288 215.647458c0 17.373288 10.778034 31.674576 23.847051 31.674576 13.207864 0 23.864407-14.023593 23.864407-31.674576s-10.79539-31.674576-23.864407-31.674577c-13.069017 0.138847-23.847051 14.283932-23.847051 31.674577z m172.084068-19.820475c15.91539 0 37.749153 8.226712 33.028339 21.174237-3.783593 10.24-22.510644-3.384407-29.244746-4.460474-8.504407-1.076068-21.018034-2.013288-31.27539 10.517695-6.872949 8.226712-17.650983 7.289492-13.884745-4.043933 4.338983-12.669831 20.358508-23.187525 41.376542-23.187525z" fill="#070001" p-id="7372"></path><path d="M318.724339 354.998237c0 13.329356 99.449492 63.192949 190.568136 62.516068 91.101288-0.659525 192.581424-49.985085 192.581423-64.407864 0-14.283932-73.051119-39.745085-194.47322-39.745085-121.283254-0.156203-188.658983 21.955254-188.658983 41.636881z" fill="#E5A627" p-id="7373"></path><path d="M928.802712 740.004881c-6.196068-75.86278-45.941153-160.490305-62.533424-202.821423a1104.670373 1104.670373 0 0 1-116.701288 31.275389c3.367051 16.974102 7.688678 54.029017 6.074576 124.789153-2.707525 105.524068-37.072271 191.505356-121.699796 241.230102-84.627525 49.724746-233.263729 38.807864-298.088136-42.45261-61.197017-76.279322-81.000136-133.293559-66.299661-324.104678-73.589153-14.561627-117.395525-29.921627-117.395525-29.921628s-21.018034 50.26278-39.08556 111.32095C94.76339 710.499797 76.973559 806.703729 94.76339 826.125017c18.327864 19.681627 83.968-89.487186 89.903729-99.328 0 0 4.703458 52.033085 16.974101 79.247186 12.253288 27.231458 46.618034 105.524068 123.43539 147.976678 76.678508 42.313763 141.919458 46.340339 187.600271 46.340339 45.680814 0 160.091119-6.716746 241.230102-96.203932 81.121627-89.487186 74.526373-145.685695 77.893424-178.158644 0 0 68.451797 98.77261 83.134915 102.01817 15.238508 3.505898 19.820475-12.149153 13.884746-87.994577z" fill="#070001" p-id="7374"></path></svg></a>
            <a target="_blank" :href="userData.weibo"><svg t="1594894272228" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7240" width="128" height="128"><path d="M815.786667 573.44c-6.826667-13.653333-17.066667-23.893333-27.306667-34.133333-10.24-10.24-23.893333-17.066667-34.133333-23.893334s-20.48-6.826667-27.306667-10.24c-10.24-3.413333-17.066667-3.413333-20.48-10.24-3.413333-3.413333-3.413333-6.826667 0-10.24l3.413333-3.413333 3.413334-3.413333s3.413333-3.413333 3.413333-10.24c3.413333-3.413333 3.413333-10.24 3.413333-13.653334 0-3.413333 3.413333-10.24 3.413334-17.066666v-17.066667c0-3.413333-6.826667-10.24-6.826667-17.066667-3.413333-6.826667-6.826667-13.653333-13.653333-17.066666-10.24-10.24-20.48-17.066667-37.546667-17.066667-13.653333-3.413333-30.72-3.413333-44.373333 0s-30.72 6.826667-44.373334 10.24c-13.653333 3.413333-23.893333 6.826667-34.133333 10.24l-13.653333 6.826667c-6.826667 3.413333-13.653333 3.413333-17.066667 3.413333h-10.24c-3.413333 0-3.413333-3.413333-6.826667-3.413333s-3.413333-3.413333 0-6.826667 0-6.826667 0-10.24c0-3.413333 0-6.826667 3.413334-13.653333 0-6.826667 3.413333-10.24 3.413333-13.653334v-23.893333c0-6.826667-3.413333-13.653333-6.826667-23.893333-3.413333-10.24-6.826667-17.066667-13.653333-20.48-6.826667-6.826667-13.653333-10.24-23.893333-13.653334-10.24-3.413333-23.893333-3.413333-37.546667-3.413333s-34.133333 6.826667-51.2 13.653333c-27.306667 3.413333-51.2 17.066667-75.093333 34.133334-23.893333 17.066667-44.373333 34.133333-64.853334 51.2s-34.133333 34.133333-47.786666 51.2c-13.653333 17.066667-27.306667 30.72-34.133334 40.96l-10.24 17.066666c-23.893333 30.72-37.546667 58.026667-51.2 88.746667S68.266667 607.573333 68.266667 621.226667v20.48c3.413333 34.133333 13.653333 61.44 30.72 88.746666s34.133333 47.786667 58.026666 61.44c20.48 17.066667 47.786667 30.72 78.506667 40.96 30.72 10.24 58.026667 20.48 85.333333 23.893334 27.306667 3.413333 54.613333 10.24 85.333334 10.24 51.2 3.413333 102.4 0 157.013333-10.24s102.4-30.72 150.186667-61.44c47.786667-30.72 78.506667-64.853333 98.986666-105.813334 10.24-23.893333 17.066667-44.373333 17.066667-68.266666 0-20.48-3.413333-37.546667-13.653333-47.786667z m-211.626667 184.32c-51.2 37.546667-112.64 61.44-184.32 64.853333-71.68 3.413333-136.533333-10.24-187.733333-40.96-51.2-30.72-75.093333-71.68-75.093334-119.466666s23.893333-88.746667 75.093334-122.88c51.2-34.133333 112.64-54.613333 187.733333-58.026667 75.093333-3.413333 136.533333 10.24 187.733333 37.546667s75.093333 64.853333 75.093334 112.64c-3.413333 44.373333-27.306667 88.746667-78.506667 126.293333z" fill="#DB1E2A" p-id="7241"></path><path d="M532.48 628.053333c-3.413333-17.066667-13.653333-34.133333-23.893333-47.786666-10.24-13.653333-27.306667-23.893333-47.786667-34.133334-20.48-6.826667-44.373333-10.24-75.093333-6.826666-20.48 3.413333-37.546667 6.826667-51.2 13.653333s-27.306667 17.066667-34.133334 23.893333c-10.24 10.24-17.066667 20.48-23.893333 30.72-6.826667 10.24-10.24 20.48-13.653333 30.72-3.413333 10.24-3.413333 20.48-3.413334 27.306667v30.72c0 3.413333 0 6.826667 3.413334 13.653333 0 6.826667 3.413333 10.24 6.826666 17.066667s6.826667 10.24 10.24 17.066667c6.826667 6.826667 10.24 10.24 20.48 13.653333 44.373333 20.48 85.333333 27.306667 126.293334 20.48 37.546667-6.826667 68.266667-27.306667 92.16-58.026667 10.24-10.24 17.066667-27.306667 17.066666-40.96 3.413333-17.066667 0-34.133333-3.413333-51.2z m-139.946667 78.506667c-3.413333 6.826667-10.24 13.653333-17.066666 17.066667-6.826667 3.413333-17.066667 6.826667-23.893334 6.826666H341.333333c-3.413333 0-6.826667 0-10.24-3.413333-3.413333 0-6.826667-3.413333-10.24-3.413333-3.413333 0-6.826667-3.413333-6.826666-6.826667-3.413333 3.413333-3.413333 0-6.826667-3.413333 0-3.413333-3.413333-3.413333-3.413333-6.826667v-10.24c0-6.826667 3.413333-13.653333 6.826666-20.48 3.413333-6.826667 10.24-13.653333 17.066667-17.066667s13.653333-10.24 20.48-10.24h17.066667c3.413333 0 10.24 3.413333 13.653333 3.413334 3.413333 3.413333 6.826667 3.413333 10.24 6.826666s6.826667 6.826667 6.826667 10.24c0 3.413333 3.413333 6.826667 3.413333 13.653334 0 10.24 0 17.066667-6.826667 23.893333z m51.2-54.613333c0 3.413333-3.413333 6.826667-6.826666 10.24-3.413333 3.413333-10.24 3.413333-13.653334 3.413333-3.413333 0-10.24-3.413333-10.24-6.826667l-3.413333-6.826666v-6.826667-3.413333l3.413333-3.413334s0-3.413333 3.413334-3.413333l3.413333-3.413333c6.826667-3.413333 10.24-6.826667 17.066667-3.413334 3.413333 0 10.24 3.413333 10.24 6.826667 3.413333 3.413333 3.413333 6.826667 3.413333 10.24-3.413333 0-3.413333 3.413333-6.826667 6.826667z" fill="#040000" p-id="7242"></path><path d="M798.72 447.146667c3.413333 0 6.826667 0 10.24-3.413334s6.826667-3.413333 6.826667-6.826666 3.413333-6.826667 3.413333-10.24v-3.413334c6.826667-78.506667-20.48-119.466667-81.92-133.12-17.066667-3.413333-34.133333-3.413333-51.2 0-3.413333 0-10.24 0-13.653333 3.413334l-10.24 10.24c-3.413333 3.413333-3.413333 6.826667-3.413334 10.24 0 6.826667 3.413333 13.653333 6.826667 17.066666 3.413333 3.413333 10.24 6.826667 17.066667 6.826667 51.2-13.653333 81.92 3.413333 85.333333 51.2 0 10.24 0 23.893333-3.413333 34.133333 0 6.826667 3.413333 13.653333 6.826666 17.066667 13.653333 3.413333 20.48 6.826667 27.306667 6.826667z" fill="#F39830" p-id="7243"></path><path d="M781.653333 160.426667c-30.72-6.826667-68.266667-6.826667-119.466666 3.413333h-3.413334v3.413333c-10.24 3.413333-13.653333 6.826667-20.48 13.653334-3.413333 6.826667-6.826667 13.653333-6.826666 20.48 0 10.24 3.413333 17.066667 10.24 23.893333 6.826667 10.24 13.653333 13.653333 23.893333 13.653333h13.653333c3.413333 0 6.826667 0 10.24-3.413333 3.413333 0 6.826667-3.413333 6.826667-3.413333h37.546667c10.24 0 20.48 3.413333 34.133333 6.826666s23.893333 10.24 34.133333 13.653334c10.24 6.826667 23.893333 13.653333 34.133334 23.893333 10.24 10.24 20.48 23.893333 30.72 37.546667 17.066667 40.96 20.48 78.506667 10.24 116.053333v6.826667c0 3.413333 0 6.826667-3.413334 6.826666 0 3.413333 0 6.826667-3.413333 10.24v10.24c0 6.826667 0 10.24 3.413333 13.653334 3.413333 3.413333 6.826667 6.826667 13.653334 10.24 3.413333 0 10.24 3.413333 17.066666 3.413333 20.48 0 30.72-10.24 34.133334-34.133333 6.826667-27.306667 13.653333-51.2 13.653333-75.093334 0-23.893333 0-44.373333-3.413333-64.853333s-10.24-34.133333-20.48-51.2c-6.826667-13.653333-17.066667-27.306667-27.306667-40.96-10.24-10.24-23.893333-20.48-37.546667-30.72-13.653333-10.24-27.306667-17.066667-40.96-20.48-13.653333-6.826667-27.306667-10.24-40.96-13.653333z" fill="#F39830" p-id="7244"></path></svg></a>
            <a target="_blank" :href="userData.bilibili"><svg t="1594894259172" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7114" width="128" height="128"><path d="M419.5 309.304c-17.514-9.487-35.029-18.974-52.543-28.583l-87.209-47.435c-11.798-6.447-16.663-16.299-9.973-28.462 6.69-12.284 17.88-13.136 29.434-6.81 68.113 37.096 136.347 74.072 204.338 111.655 17.393 9.609 48.773 3.892 59.842-12.406a66632.417 66632.417 0 0 0 104.115-151.55c1.216-1.825 2.432-3.65 3.648-5.352 9.852-13.745 21.164-17.393 31.38-9.366 11.799 9.366 9.853 20.434 2.19 31.624a18582.62 18582.62 0 0 0-42.205 61.788c-19.461 28.583-38.922 57.166-60.694 88.911h245.084c22.867 0 26.394 3.649 26.515 26.515 0.244 156.78 0.365 313.44 0.609 470.22 0 22.38-4.014 26.272-26.88 26.394-5.96 0-12.042 0.608-17.88-0.122-21.65-2.432-37.462-0.364-45.003 26.394-6.811 24.083-32.475 36.367-55.585 33.935-26.758-2.798-44.395-18.61-51.206-43.544-4.135-15.082-11.19-17.15-24.812-17.028-94.02 0.608-187.918 0.365-281.938 0.122-10.825 0-17.15 0.973-20.312 14.109-6.811 28.218-30.043 46.098-55.706 46.584-26.637 0.487-49.747-16.907-57.531-46.22-3.284-12.284-8.758-15.081-20.07-14.473-14.595 0.851-29.312 0.365-44.029 0.121-16.055-0.364-23.11-6.932-23.11-22.623 0.122-159.334 0.365-318.791 0.73-478.247 0-16.542 6.69-22.015 25.056-22.015 75.532-0.122 151.064 0 226.474 0h15.812c0.487-1.338 0.973-2.676 1.46-4.136z m417.555 490.29V349.076H188.648v450.516h648.407z m-520.94 37.948h-44.638c3.041 12.77 9.244 21.771 21.164 22.501 13.258 0.973 19.582-8.879 23.474-22.501z m394.445-0.122c4.5 13.623 10.582 23.596 23.961 22.623 12.042-0.851 17.637-10.217 21.286-22.623H710.56z" fill="#1296DB" p-id="7115"></path><path d="M513.399 768.578H252.746c-25.299 0-29.312-4.014-29.312-29.313 0.121-108.98 0.243-217.96 0.486-327.062 0-22.988 4.744-27.732 27.61-27.732h523.008c23.23 0 27.974 4.622 28.096 27.367 0.365 109.588 0.608 219.055 0.73 328.643 0 23.475-4.865 27.975-29.07 28.097H513.4z m250.678-38.557V423.393H262.234V730.02h501.843z" fill="#1296DB" p-id="7116"></path><path d="M515.71 675.653c-6.69 4.743-12.893 10.095-19.948 13.865-23.23 12.285-46.34 11.19-67.747-3.77-23.596-16.542-34.057-40.746-31.989-68.964 0.487-6.082 11.677-15.69 18.123-15.934 6.325-0.243 14.352 8.515 18.974 15.204 3.65 5.352 2.068 13.866 4.622 20.312 4.865 12.285 13.866 23.961 27.367 21.042 9.973-2.067 18.974-12.163 26.393-20.434 3.65-4.135 3.041-12.284 4.014-18.609 1.703-12.041 8.636-19.339 20.434-19.096 10.703 0.244 17.636 6.812 19.096 18.488 0.851 7.42 1.094 16.663 5.473 21.528 7.055 7.906 17.028 17.393 26.15 17.758 8.15 0.244 18.123-9.73 24.57-17.514 4.257-5.109 4.013-14.231 5.351-21.65 2.19-11.798 8.88-18.975 21.042-18.123 12.042 0.973 18.366 8.757 17.88 21.042-1.216 31.015-13.38 56.193-42.084 70.058-26.758 12.893-51.814 7.42-73.708-12.527-1.216-0.852-2.554-1.582-4.013-2.676z m214.068-116.035c0.365 18.366-14.596 28.461-28.461 20.555-37.097-21.163-73.586-43.421-109.954-65.801-9.608-5.96-11.676-15.69-6.081-25.542 5.716-10.096 15.812-12.772 25.177-7.42 37.462 21.65 74.56 43.908 111.413 66.653 4.257 2.798 6.325 9.244 7.906 11.555z m-316.602-70.667c3.406 3.406 12.163 8.15 13.136 13.988 1.095 6.932-2.554 18.974-7.906 21.65-32.232 16.541-65.315 31.38-98.52 46.097-10.095 4.5-21.164 1.095-23.718-9.852-1.703-7.176 1.338-20.677 6.447-23.353 33.204-17.028 67.504-31.745 101.439-47.192 1.46-0.608 3.162-0.486 9.122-1.338z" fill="#1296DB" p-id="7117"></path></svg></a>
            <a target="_blank" :href="userData.git"><svg t="1594974154702" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1433" width="128" height="128"><path d="M110.933333 451.84L357.546667 204.8l72.106666 72.533333c-10.24 36.266667 6.4 75.946667 39.68 95.146667v236.373333c-25.6 14.506667-42.666667 42.24-42.666666 73.813334a85.333333 85.333333 0 0 0 85.333333 85.333333 85.333333 85.333333 0 0 0 85.333333-85.333333c0-31.573333-17.066667-59.306667-42.666666-73.813334V401.493333l88.32 89.173334c-2.986667 6.4-2.986667 13.653333-2.986667 21.333333a85.333333 85.333333 0 0 0 85.333333 85.333333 85.333333 85.333333 0 0 0 85.333334-85.333333 85.333333 85.333333 0 0 0-85.333334-85.333333c-7.68 0-14.933333 0-21.333333 2.986666L594.346667 320a84.48 84.48 0 0 0-49.066667-99.84c-18.346667-6.826667-37.546667-8.533333-54.613333-3.84L418.133333 144.213333l33.706667-33.28c33.28-33.706667 87.04-33.706667 120.32 0l340.906667 340.906667c33.706667 33.28 33.706667 87.04 0 120.32l-340.906667 340.906667c-33.28 33.706667-87.04 33.706667-120.32 0L110.933333 572.16c-33.706667-33.28-33.706667-87.04 0-120.32z" fill="#E64A19" p-id="1434"></path></svg></a>
          </span>
        </p>
        <p class="saying">
          <span v-show="!userData.saying">留下想说的话叭~</span>
          <span v-show="userData.saying">{{ userData.saying }}</span>
        </p>
      </div>
      <button @click="edit_user = true">编辑资料</button>
    </div>
    <!-- 喜欢与浏览 -->
    <div class="mark user-card">
      <p class="title">我的足迹</p>
      <div class="count">
        <p><span>点赞数</span><i class="iconfont iconzan1"></i><span v-if="likes">{{ likes.length }}个</span></p>
        <p><span>浏览次数</span><i class="iconfont iconzuji"></i><span>{{ userData.looked + 1 }}条</span></p>
      </div>
    </div>

    <!-- 一些列表 -->
    <div class="list">
      <div class="likes user-card">
        <p class="title">我的点赞<i class="iconfont iconzan1"></i></p>
        <ul>
          <li v-for="(item,index) in likes" :key="index">
            <router-link tag="p" :to="{ path: `/article/${ item.article_id }` }">{{ item.title }}</router-link>
            <p>{{ item.time | timeDate }}</p>
          </li>
        </ul>
      </div>
      <div class="friends user-card">
        <p class="title">我的好友<i class="iconfont iconfriend"></i></p>
      </div>
    </div>


    <!-- 用户信息 -->
    <el-dialog title="编辑资料" :visible.sync="edit_user" v-if="edit_user" :close-on-click-modal="false">
      <div slot="footer" class="dialog-footer">
        <ul>
          <li ref="head_upload"><span>头像:</span><label><input type="file" name="" id="head_img"></label><el-button type="primary" @click="upload" size="medium">上传</el-button></li>
          <li><span>昵称:</span><el-input size="medium" v-model="user.name" placeholder="你的第二个名字╭(●｀∀´●)╯"></el-input></li>
          <li><span>签名:</span><el-input size="medium" v-model="user.saying" placeholder="说点什么吧(●’◡’●)ﾉ"></el-input></li>
          <li><span>Git:</span><el-input size="medium" v-model="user.git" placeholder="大佬的仓库(ง •̀_•́)ง"></el-input></li>
          <li><span>QQ:</span><el-input size="medium" v-model="user.qq" placeholder="小企鹅( ｡ớ ₃ờ)ھ"></el-input></li>
          <li><span>微博:</span><el-input size="medium" v-model="user.weibo" placeholder="冲个浪( ˙灬˙ )"></el-input></li>
          <li><span>bilibili:</span><el-input size="medium" v-model="user.bilibili" placeholder="小电视｡:.ﾟヽ(｡◕‿◕｡)ﾉﾟ.:｡+ﾟ"></el-input></li>
          <li><el-button type="primary" @click="submit">保存</el-button><el-button @click="edit_user = false">取消</el-button></li>
        </ul>
      </div>
    </el-dialog>
  </section>
</template>

<script>
import { mapState } from 'vuex'
import { article_user_like } from '@/axios/article'
import { upload_head_img, update_user_info } from '@/axios/user'
export default {
    name: 'usercenter',
    data () {
      return {
        edit_user: false,
        linkqq: '',
        user: {
          name: '',
          saying: '',
          qq: '',
          git: '',
          weibo: '',
          bilibili: '',
        },
        likes: []
      }
    },
    watch: {
      edit_user () {
        this.changeInfo()
      }
    },
    mounted () {
      this.upload_addr = AXIOS_URL + '/upload/heads'
      this.changeInfo()
    },
    activated () {
      this.likeList()
    },
    computed: {
      ...mapState({
            'userData': state => state.webside.userData
        })
    },
    methods: {
      async submit () {
        let result = await update_user_info( this.user.name,this.user.saying,this.user.qq,this.user.git,this.user.weibo,this.user.bilibili )
        if ( result.data.code == 200 ) {
          this.$store.commit('webside/setUserData', result.data.data)
          this.$message({ message: '更新成功'})
          this.changeInfo()
          this.edit_user = false
        }
      },
      async upload () {
        let upload = this.$refs.head_upload.querySelector('#head_img')
        if ( !upload.files[0] ) { return this.$message({ type: 'error', message: '您还未选择图片'})}
        let params = new FormData()
        params.append( 'head_img',upload.files[0] )
        params.append( 'token',this.$store.state.webside.token )
        let result = await upload_head_img( params )
        if ( result.data.code == 200 ) {
          this.$store.commit('webside/setUserData', result.data.data)
          this.$message({ message: '更换成功'})
        }
      },
      changeInfo () {
        Object.assign(this.user, this.userData)
        this.linkqq = `http://wpa.qq.com/msgrd?v=3&uin=${ this.user.qq }&site=qq&menu=yes`
      },
      async likeList () {
        let result = await article_user_like( 1, this.userData.id )
        if ( result.data.code == 200 ) {
          this.likes = result.data.data
        }
      }
    }
}
</script>

<style lang="scss" scoped>
@import '@/assets/css/theme.scss';
#user_center{
  div.head{
    width: 100%;
    height: 200px;
    display: flex;
    justify-content: flex-start;
    color: white;
    background-image: url(~@/assets/img/user_bg.jpg);
    background-size: cover;
    background-position: center;
    position: relative;
    img{
        border-radius: 50%;
        width: 160px;
        height: 160px;
        align-self: center;
    }
    div.user{
      width: 30%;
      align-items: flex-end;
      padding-top: 80px;
      margin-left: 20px;
      p.name{
        font-size: 30px;
        padding-bottom: 10px;
        margin-bottom: 10px;
        border-bottom: 1px solid $gray;
        display: flex;
        justify-content: space-between;
        svg{
          width: 20px;
          height: 20px;
          margin-left: 20px;
        }
      }
      p.saying{ color: $gray;}
    }
    button{
      text-align: center;
      width: 120px;
      height: 40px;
      background: transparent;
      border: 1px solid white;
      line-height: 38px;
      font-size: 16px;
      border-radius: 20px;
      transition: .2s;
      color: white;
      position: absolute;
      top: 100px;
      right: 40px;
      &:hover{
        background: $red;
        border-color: $red;
      }
    }
  }
  .mark{
    margin-top: 30px;
    div.count{
      display: flex;
      align-items: center;
      justify-content: space-around;
      p{
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        text-align: center;
        margin-top: 20px;
        font-size: 16px;
        span{
          display: block;
          width: 100%;
        }
        i{
          font-size: 46px;
          margin: 10px auto;
          color: $red;
          cursor: pointer;
          &:hover{ animation: heartBeat 1s infinite;}
        }
      }
    }
  }
  .list{
    display: flex;
    justify-content: space-between;
    margin-top: 30px;
    > div{
      width: 46%;
      min-width: 460px;
      min-height: 300px;
    }
  }
  .dialog-footer{
    ul{
      li{
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: right;
        margin-bottom: 20px;
        &:last-child{
          justify-content: flex-end;
          padding-right: 70px;
        }
        span{
          &:first-child{
            display: block;
            width: 80px;
            margin-right: 40px;
          }
        }
        label{
          align-self: center;
          width: 88px;
          height: 36px;
          cursor: pointer;
          margin: 0 100px 0 40px;
          background: url(~@/assets/img/select_img.png);
          input{
            width: 1px;
            height: 1px;
            opacity: 0;
          }
        }
      }
    }
  }
}
</style>